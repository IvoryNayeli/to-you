<div class="success-container" id="success-container">
  <p id="success-text" style="margin-bottom: 20px; font-weight: bold; font-size: 22px; color:#FF6F61;"></p>
  <button id="success-button" style="float: right;" onclick="location.href='message.html'">Par ici !</button>
</div>

<script>
  window.addEventListener('load', () => {
    const header = document.getElementById('header');
    const middle = document.getElementById('middle');
    const container = document.getElementById('password-container');

    setTimeout(() => { header.style.opacity = '1'; }, 200);
    setTimeout(() => { middle.style.opacity = '1'; }, 800);
    setTimeout(() => { container.style.opacity = '1'; }, 1200);

    const inputs = container.querySelectorAll('input');
    const password = "monstrueux";
    const errorMessage = document.getElementById('error-message');
    const successContainer = document.getElementById('success-container');
    const successText = document.getElementById('success-text');
    let firstAttempt = true; // pour savoir si c'est du premier coup

    inputs.forEach((input, idx) => {
      input.addEventListener('input', () => {
        input.value = input.value.toUpperCase();

        if (input.value && idx < inputs.length - 1) {
          inputs[idx + 1].focus();
        }

        let attempt = Array.from(inputs).map(i => i.value.toLowerCase()).join('');
        if (attempt.length === password.length) {
          if (attempt === password) {
            successContainer.style.display = 'flex';
            errorMessage.style.display = 'none';
            inputs.forEach(i => i.disabled = true);

            // Texte dynamique selon premier coup ou non
            if (firstAttempt) {
              successText.textContent = "Comme prévu, tu as trouvé du premier coup.";
            } else {
              successText.textContent = "Bien vu !";
            }

          } else {
            errorMessage.style.display = 'block';
            inputs.forEach(i => i.value = '');
            inputs[0].focus();
            firstAttempt = false;
          }
        }
      });

      input.addEventListener('keydown', (e) => {
        if(e.key === 'Backspace' && !input.value && idx > 0){
          inputs[idx - 1].focus();
        }
      });
    });
  });
</script>
